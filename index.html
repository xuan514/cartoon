<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/style.css">
<title>Convert</title>

</head>
<body>
<div class="title">風格轉換器</div>
<div class="container">
    <div class="load-box">
        <div id="imgup">圖片預覽</div>
        <div id="imgdn" style="display: none;">轉換結果</div>
        <form id="imgupform" enctype="multipart/form-data" method="post">
            <img id="imagePreview" src="#" alt="Preview" style="width: auto; height: 250px; display: none;"><br>
            <label id="imagelabel" for="imageUpload">+ 點擊選擇圖片</label>
            <input type="file" id="imageUpload" accept="image/*" style="display: none;">
            <span id="file-name"></span>
            <input type="reset" id="imageResetBtn" value="重選" style="display: none;">
            <input type="submit" id="imageConvertBtn" value="轉換" style="display: none;">
        </form>
        <form id="imgdnform" method="get" style="display: none;">
            <img id="convertedImg" src="#" alt="ConvertedImage" style="width: auto; height: 250px; display: none;"><br>
        <a id="imgdnBtn" href="#" download="" style="display: none;">下載轉換後圖片</a>
        </form>
    </div>
    <div>
        <div id="imgdn" style="display: none;">轉換結果</div>
        <form id="imgdnform" method="get">
            <img id="convertedImg" src="#" alt="ConvertedImage" style="width: auto; height: 250px; display: none;"><br>
        <a id="imgdnBtn" href="#" download="" style="display: none;">下載轉換後圖片</a>
        </form>
    </div>
    <div class="load-box">
        <div id="vidup">影片預覽</div>
        <form id="vidupform" enctype="multipart/form-data" method="post">
            <video id="videoPreview" controls style="width: auto; height: 240px; display: none;">
                <source src="#" type="video/mp4">
                瀏覽器沒有支援影片播放!
            </video><br>
            <label id="videolabel" for="videoUpload">+ 點擊選擇影片</label>
            <input type="file" id="videoUpload" accept="video/*" style="display: none;">
            <span id="video-file-name"></span>
            <input type="reset" id="videoResetBtn" value="重選" style="display: none;">
            <input type="submit" id="videoConvertBtn" value="轉換" style="display: none;">
        </form>
    </div>
    <div>
        <div id="viddn" style="display: none;">轉換結果</div>
        <form id="viddnform" method="get" style="display: none;">
            <img id="convertedVid" src="#" alt="ConvertedVideo" style="width: auto; height: 240px; display: none;"><br>
            <a id="viddnBtn" href="#" download="" style="display: none;">下載轉換後影片</a>
        </form>
    </div>
</div>
<script>
    const imageUpload = document.getElementById('imageUpload');
    const imagePreview = document.getElementById('imagePreview');
    const imageLabel = document.getElementById('imagelabel');
    const imageFileName = document.getElementById('file-name');
    const imageResetBtn = document.getElementById('imageResetBtn');
    const convertedImg = document.getElementById('convertedImg');
    const imageConvertBtn = document.getElementById('imageConvertBtn');
    const imgupload = document.getElementById('imgupload');
    const imgdownload = document.getElementById('imgdownload');
    // 圖片預覽
    imageUpload.addEventListener('change', function() {
        const file = this.files[0];
        if (file) {
            // 顯示檔案名稱
            imageFileName.innerText = file.name;

            imageLabel.style.display = 'none';
            imageResetBtn.style.display = 'inline-block';
            imageConvertBtn.style.display = 'inline-block';
            // 顯示預覽圖片
            const reader = new FileReader();
            reader.onload = function() {
                imagePreview.src = reader.result;
                imagePreview.style.display = 'block';
            }
            reader.readAsDataURL(file);
        }else{
            // 如果沒有選擇文件，隱藏預覽和檔案名稱
            imagePreview.style.display = 'none';
            imageFileName.innerText = '';
            imageResetBtn.style.display = 'none';
            imageConvertBtn.style.display = 'none';
        }
    });
    // 圖片重選
    imageResetBtn.addEventListener('click', function() {
        imageUpload.value = ''; // 清除已選擇的文件
        imageFileName.innerText = ''; // 清除檔案名稱

        imagePreview.style.display = 'none'; 
        this.style.display = 'none'; 
        imageConvertBtn.style.display = 'none';
        imageLabel.style.display = 'inline-block';
    });
    
    // 圖片轉換
    imageConvertBtn.addEventListener('click', function() {
        const fileType = imageUpload.value.split('.').pop().toLowerCase();
        if(fileType !== 'jpg' && fileType !== 'jpeg' && fileType !== 'png' && fileType !== 'gif'){    
            alert('請選取圖片格式的檔案!!');
        } 
        else{
            imgupload.style.display = 'none';
            imgdownload.style.display = 'block';
        }
    });

    const videoUpload = document.getElementById('videoUpload');
    const videoPreview = document.getElementById('videoPreview');
    const videoLabel = document.getElementById('videolabel');
    const videoFileName = document.getElementById('video-file-name');
    const videoResetBtn = document.getElementById('videoResetBtn');
    const videoConvertBtn = document.getElementById('videoConvertBtn');
    const vidupload = document.getElementById('vidupload');
    const viddownload = document.getElementById('viddownload');
    // 影片預覽
    videoUpload.addEventListener('change', function() {
        const file = this.files[0];
        if (file) {
            // 顯示檔案名稱
            videoFileName.innerText = file.name;
            // 顯示重選按鈕
            videoLabel.style.display = 'none';
            videoResetBtn.style.display = 'inline-block';
            videoConvertBtn.style.display = 'inline-block';
            // 顯示預覽影片
            const reader = new FileReader();
            reader.onload = function() {
                videoPreview.src = reader.result;
                videoPreview.style.display = 'block';
            }
            reader.readAsDataURL(file);
        }else {
            // 如果沒有選擇文件，隱藏預覽和檔案名稱
            videoPreview.style.display = 'none';
            videoFileName.innerText = '';
            // 隱藏重選按鈕
            videoResetBtn.style.display = 'none';
            videoConvertBtn.style.display = 'none';
        }
    });
     // 影片重選
     videoResetBtn.addEventListener('click', function() {
        videoUpload.value = ''; // 清除已選擇的文件
        videoFileName.innerText = ''; // 清除檔案名稱
        videoPreview.style.display = 'none'; // 隱藏預覽影片
        this.style.display = 'none'; // 隱藏重選按鈕
        videoConvertBtn.style.display = 'none';
        videoLabel.style.display = 'inline-block';
    });
    // 檔案轉換
    videoConvertBtn.addEventListener('submit', function(event) {
        
    });
</script>
</body>
</html>
